create database medbooking;

use medbooking;

create table bookings(
  id int not null auto_increment,
  name varchar(40) not null,
  age int not null,
  gender varchar(6) not null,
  address varchar(200) not null,
  mob_no varchar(10) not null,
  email_id varchar(30) not null,
  drid int not null,
  appointment_date date not null default(curdate()),
  appointment_time datetime not null,
  primary key (id));

create table doctors(
  id int not null auto_increment,
  drname varchar(40) not null,
  clinic varchar(30) not null,
  draddress varchar(200) not null,
  drmob varchar(10) not null unique,
  primary key(id)
);

insert into doctors (drname, clinic, draddress, drmob) values
('Dr. Nachiket Surve', 'Swaroop Clinic', 'Near Siddhivinayak Temple, Gayalwadi, Ratnagiri', '989242351'),
('Dr. Neha Wadkar', 'Shree Sai Clinic', 'Jain Nagar, Ratnagiri', '9456888832'),
('Dr. Mahesh Nalawade', 'Shree Health Care', 'Behind D-Mart, Ratnagiri', '9894234323'),
('Dr. Viraj Borkar', 'Borkar Clinic', 'Near Krishna Restaurant, Kuvarbav, Ratnagiri', '9066645778'),
('Dr. Prachi Kulkarni', 'Dhanvantari Clinic', 'Behind Chirayu hospital, Salvi stop, Ratnagiri', '9863446577'),
('Dr. Yash Gadre', 'Matrukrupa Clinic','Tilak aali, Ratnagiri', '9865773213'),
('Dr. Saloni Shinde', 'Sushrusha Clinic', 'Near Waingankar dining, Juna Malnaka, Ratnagiri', '9045622716');

create table times(drid int, timeslot datetime);

insert into times values(1,'2000-01-01 09:45'), (1,'2000-01-01 10:30'), (1,'2000-01-01 10:45'), (1,'2000-01-01 11:00'), (1,'2000-01-01 11:30'), 
(1,'2000-01-01 11:45'), (1,'2000-01-01 12:45'), (1,'2000-01-01 13:00'), (1,'2000-01-01 14:00'), (1,'2000-01-01 14:15'), (1,'2000-01-01 14:30'), 
(1,'2000-01-01 14:45'), (1,'2000-01-01 15:00'), (1,'2000-01-01 16:00'), (1,'2000-01-01 16:15'), (1,'2000-01-01 16:30'), (1,'2000-01-01 18:00'), (1,'2000-01-01 18:45'), 
(1,'2000-01-01 19:00'), (1,'2000-01-01 19:15'), (1,'2000-01-01 19:30'), (1,'2000-01-01 19:45'),
(2,'2000-01-01 11:45'), (2,'2000-01-01 12:00'), (2,'2000-01-01 12:45'), (2,'2000-01-01 13:15'), 
(2,'2000-01-01 14:30'), (2,'2000-01-01 14:45'), (2,'2000-01-01 15:00'), (2,'2000-01-01 15:15'), (2,'2000-01-01 15:45'), (2,'2000-01-01 16:45'), 
(2,'2000-01-01 17:00'), (2,'2000-01-01 17:15'), (2,'2000-01-01 18:00'), (2,'2000-01-01 18:15'), (2,'2000-01-01 18:30'), (2,'2000-01-01 19:00'), (2,'2000-01-01 19:15'), 
(2,'2000-01-01 19:30'), (2,'2000-01-01 19:45'), (2,'2000-01-01 20:00'), (2,'2000-01-01 20:30'),
(3,'2000-01-01 10:15'), (3,'2000-01-01 11:00'), (3,'2000-01-01 11:15'), (3,'2000-01-01 11:45'), (3,'2000-01-01 12:00'), 
(3,'2000-01-01 14:15'), (3,'2000-01-01 14:30'), (3,'2000-01-01 14:45'), (3,'2000-01-01 15:00'), (3,'2000-01-01 15:15'), (3,'2000-01-01 15:30'), (3,'2000-01-01 16:00'), 
(3,'2000-01-01 16:15'), (3,'2000-01-01 16:45'), (3,'2000-01-01 17:00'), (3,'2000-01-01 17:15'), (3,'2000-01-01 17:30'), (3,'2000-01-01 18:00'), (3,'2000-01-01 18:15'),
(4,'2000-01-01 06:00'), (4,'2000-01-01 06:15'), (4,'2000-01-01 06:30'), (4,'2000-01-01 06:45'), (4,'2000-01-01 07:00'), (4,'2000-01-01 07:15'), (4,'2000-01-01 08:45'), 
(4,'2000-01-01 09:00'), (4,'2000-01-01 09:15'), (4,'2000-01-01 11:45'), (4,'2000-01-01 12:00'), (4,'2000-01-01 12:15'), (4,'2000-01-01 12:30'), (4,'2000-01-01 12:45'), 
(4,'2000-01-01 13:00'), (4,'2000-01-01 13:15'), (4,'2000-01-01 15:00'), (4,'2000-01-01 15:15'), (4,'2000-01-01 15:30'), (4,'2000-01-01 17:00'), (4,'2000-01-01 17:15'), 
(4,'2000-01-01 18:00'), (4,'2000-01-01 18:45'), (4,'2000-01-01 19:00'), (4,'2000-01-01 19:30'), (4,'2000-01-01 19:45'), (4,'2000-01-01 20:00'), (4,'2000-01-01 20:15'),
(4,'2000-01-01 20:30'), (4,'2000-01-01 20:45'),
(5,'2000-01-01 09:45'), (5,'2000-01-01 10:30'), (5,'2000-01-01 10:45'), (5,'2000-01-01 11:00'), (5,'2000-01-01 11:30'), 
(5,'2000-01-01 11:45'), (5,'2000-01-01 12:45'), (5,'2000-01-01 13:45'), (5,'2000-01-01 14:00'), (5,'2000-01-01 14:15'), (5,'2000-01-01 14:30'), 
(5,'2000-01-01 14:45'), (5,'2000-01-01 15:00'), (5,'2000-01-01 16:00'), (5,'2000-01-01 16:15'), (5,'2000-01-01 16:30'), (5,'2000-01-01 18:00'), (5,'2000-01-01 18:45'), 
(5,'2000-01-01 19:00'), (5,'2000-01-01 19:15'), (5,'2000-01-01 19:30'), (5,'2000-01-01 19:45'),
(6,'2000-01-01 12:45'), (6,'2000-01-01 13:00'), (6,'2000-01-01 13:15'), (6,'2000-01-01 13:30'), (6,'2000-01-01 13:45'), 
(6,'2000-01-01 15:15'), (6,'2000-01-01 15:45'), (6,'2000-01-01 16:00'), (6,'2000-01-01 16:15'), (6,'2000-01-01 17:00'), (6,'2000-01-01 17:15'), (6,'2000-01-01 17:30'), 
(6,'2000-01-01 17:45'), (6,'2000-01-01 19:00'), (6,'2000-01-01 19:15'), (6,'2000-01-01 20:15'), 
(7,'2000-01-01 06:00'), (7,'2000-01-01 06:15'), (7,'2000-01-01 06:30'), (7,'2000-01-01 06:45'), (7,'2000-01-01 07:00'), (7,'2000-01-01 07:15'), (7,'2000-01-01 08:45'), 
(7,'2000-01-01 09:00'), (7,'2000-01-01 09:15'), (7,'2000-01-01 11:45'), (7,'2000-01-01 12:00'), (7,'2000-01-01 12:15'), (7,'2000-01-01 12:30'), (7,'2000-01-01 12:45'), 
(7,'2000-01-01 13:00'), (7,'2000-01-01 13:15'), (7,'2000-01-01 15:00'), (7,'2000-01-01 15:15'), (7,'2000-01-01 15:30'), (7,'2000-01-01 17:00'), (7,'2000-01-01 17:15'), 
(7,'2000-01-01 18:00'), (7,'2000-01-01 18:45'), (7,'2000-01-01 19:00'), (7,'2000-01-01 19:30'), (7,'2000-01-01 19:45'), (7,'2000-01-01 20:00'), (7,'2000-01-01 20:15'),
(7,'2000-01-01 20:30'), (7,'2000-01-01 20:45');

delimiter //
create procedure refill()
begin
delete from times where 1 = 1;
insert into times values(1,'2000-01-01 09:45'), (1,'2000-01-01 10:30'), (1,'2000-01-01 10:45'), (1,'2000-01-01 11:00'), (1,'2000-01-01 11:30'), 
(1,'2000-01-01 11:45'), (1,'2000-01-01 12:45'), (1,'2000-01-01 13:00'), (1,'2000-01-01 14:00'), (1,'2000-01-01 14:15'), (1,'2000-01-01 14:30'), 
(1,'2000-01-01 14:45'), (1,'2000-01-01 15:00'), (1,'2000-01-01 16:00'), (1,'2000-01-01 16:15'), (1,'2000-01-01 16:30'), (1,'2000-01-01 18:00'), (1,'2000-01-01 18:45'), 
(1,'2000-01-01 19:00'), (1,'2000-01-01 19:15'), (1,'2000-01-01 19:30'), (1,'2000-01-01 19:45'),
(2,'2000-01-01 11:45'), (2,'2000-01-01 12:00'), (2,'2000-01-01 12:45'), (2,'2000-01-01 13:15'), 
(2,'2000-01-01 14:30'), (2,'2000-01-01 14:45'), (2,'2000-01-01 15:00'), (2,'2000-01-01 15:15'), (2,'2000-01-01 15:45'), (2,'2000-01-01 16:45'),
(2,'2000-01-01 17:00'), (2,'2000-01-01 17:15'), (2,'2000-01-01 18:00'), (2,'2000-01-01 18:15'), (2,'2000-01-01 18:30'), (2,'2000-01-01 19:00'), (2,'2000-01-01 19:15'), 
(2,'2000-01-01 19:30'), (2,'2000-01-01 19:45'), (2,'2000-01-01 20:00'), (2,'2000-01-01 20:30'),
(3,'2000-01-01 10:15'), (3,'2000-01-01 11:00'), (3,'2000-01-01 11:15'), (3,'2000-01-01 11:45'), (3,'2000-01-01 12:00'), 
(3,'2000-01-01 14:15'), (3,'2000-01-01 14:30'), (3,'2000-01-01 14:45'), (3,'2000-01-01 15:00'), (3,'2000-01-01 15:15'), (3,'2000-01-01 15:30'), (3,'2000-01-01 16:00'), 
(3,'2000-01-01 16:15'), (3,'2000-01-01 16:45'), (3,'2000-01-01 17:00'), (3,'2000-01-01 17:15'), (3,'2000-01-01 17:30'), (3,'2000-01-01 18:00'), (3,'2000-01-01 18:15'),
(4,'2000-01-01 06:00'), (4,'2000-01-01 06:15'), (4,'2000-01-01 06:30'), (4,'2000-01-01 06:45'), (4,'2000-01-01 07:00'), (4,'2000-01-01 07:15'), (4,'2000-01-01 08:45'), 
(4,'2000-01-01 09:00'), (4,'2000-01-01 09:15'), (4,'2000-01-01 11:45'), (4,'2000-01-01 12:00'), (4,'2000-01-01 12:15'), (4,'2000-01-01 12:30'), (4,'2000-01-01 12:45'), 
(4,'2000-01-01 13:00'), (4,'2000-01-01 13:15'), (4,'2000-01-01 15:00'), (4,'2000-01-01 15:15'), (4,'2000-01-01 15:30'), (4,'2000-01-01 17:00'), (4,'2000-01-01 17:15'), 
(4,'2000-01-01 18:00'), (4,'2000-01-01 18:45'), (4,'2000-01-01 19:00'), (4,'2000-01-01 19:30'), (4,'2000-01-01 19:45'), (4,'2000-01-01 20:00'), (4,'2000-01-01 20:15'),
(4,'2000-01-01 20:30'), (4,'2000-01-01 20:45'),
(5,'2000-01-01 09:45'), (5,'2000-01-01 10:30'), (5,'2000-01-01 10:45'), (5,'2000-01-01 11:00'), (5,'2000-01-01 11:30'), 
(5,'2000-01-01 11:45'), (5,'2000-01-01 12:45'), (5,'2000-01-01 13:45'), (5,'2000-01-01 14:00'), (5,'2000-01-01 14:15'), (5,'2000-01-01 14:30'), 
(5,'2000-01-01 14:45'), (5,'2000-01-01 15:00'), (5,'2000-01-01 16:00'), (5,'2000-01-01 16:15'), (5,'2000-01-01 16:30'), (5,'2000-01-01 18:00'), (5,'2000-01-01 18:45'), 
(5,'2000-01-01 19:00'), (5,'2000-01-01 19:15'), (5,'2000-01-01 19:30'), (5,'2000-01-01 19:45'),
(6,'2000-01-01 12:45'), (6,'2000-01-01 13:00'), (6,'2000-01-01 13:15'), (6,'2000-01-01 13:30'), (6,'2000-01-01 13:45'), 
(6,'2000-01-01 15:15'), (6,'2000-01-01 15:45'), (6,'2000-01-01 16:00'), (6,'2000-01-01 16:15'), (6,'2000-01-01 17:00'), (6,'2000-01-01 17:15'), (6,'2000-01-01 17:30'), 
(6,'2000-01-01 17:45'), (6,'2000-01-01 19:00'), (6,'2000-01-01 19:15'), (6,'2000-01-01 20:15'), 
(7,'2000-01-01 06:00'), (7,'2000-01-01 06:15'), (7,'2000-01-01 06:30'), (7,'2000-01-01 06:45'), (7,'2000-01-01 07:00'), (7,'2000-01-01 07:15'), (7,'2000-01-01 08:45'), 
(7,'2000-01-01 09:00'), (7,'2000-01-01 09:15'), (7,'2000-01-01 11:45'), (7,'2000-01-01 12:00'), (7,'2000-01-01 12:15'), (7,'2000-01-01 12:30'), (7,'2000-01-01 12:45'), 
(7,'2000-01-01 13:00'), (7,'2000-01-01 13:15'), (7,'2000-01-01 15:00'), (7,'2000-01-01 15:15'), (7,'2000-01-01 15:30'), (7,'2000-01-01 17:00'), (7,'2000-01-01 17:15'), 
(7,'2000-01-01 18:00'), (7,'2000-01-01 18:45'), (7,'2000-01-01 19:00'), (7,'2000-01-01 19:30'), (7,'2000-01-01 19:45'), (7,'2000-01-01 20:00'), (7,'2000-01-01 20:15'),
(7,'2000-01-01 20:30'), (7,'2000-01-01 20:45');
end//
delimiter ;

create event medbooking
on schedule
every 1 day
starts timestamp(curdate(), '02:00:00')
do
call refill();